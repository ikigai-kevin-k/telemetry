# Telegraf Configuration for ZCAM API Monitoring
# This configuration monitors ZCAM devices using HTTP response plugin

[global_tags]
  # Global tags for all metrics
  environment = "production"
  service = "zcam-monitoring"

[agent]
  # Agent configuration
  interval = "30s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = ""
  omit_hostname = false

# Output plugin - send metrics to Prometheus
[[outputs.prometheus_client]]
  # Expose metrics on port 9273 for Prometheus to scrape
  listen = ":9273"
  metric_version = 2

# HTTP Response monitoring for ZCAM devices
[[inputs.http_response]]
  # ZCAM aro11 - RTMP Status
  urls = ["http://192.168.88.10/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro11"
    agent_name = "aro11"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.10"

[[inputs.http_response]]
  # ZCAM aro11 - Battery Status
  urls = ["http://192.168.88.10/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro11"
    agent_name = "aro11"
    endpoint_type = "battery"
    device_ip = "192.168.88.10"

[[inputs.http_response]]
  # ZCAM aro11 - Camera Mode
  urls = ["http://192.168.88.10/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro11"
    agent_name = "aro11"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.10"

[[inputs.http_response]]
  # ZCAM aro12 - RTMP Status
  urls = ["http://192.168.88.186/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro12"
    agent_name = "aro12"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.186"

[[inputs.http_response]]
  # ZCAM aro12 - Battery Status
  urls = ["http://192.168.88.186/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro12"
    agent_name = "aro12"
    endpoint_type = "battery"
    device_ip = "192.168.88.186"

[[inputs.http_response]]
  # ZCAM aro12 - Camera Mode
  urls = ["http://192.168.88.186/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro12"
    agent_name = "aro12"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.186"

[[inputs.http_response]]
  # ZCAM aro21 - RTMP Status
  urls = ["http://192.168.88.12/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro21"
    agent_name = "aro21"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.12"

[[inputs.http_response]]
  # ZCAM aro21 - Battery Status
  urls = ["http://192.168.88.12/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro21"
    agent_name = "aro21"
    endpoint_type = "battery"
    device_ip = "192.168.88.12"

[[inputs.http_response]]
  # ZCAM aro21 - Camera Mode
  urls = ["http://192.168.88.12/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro21"
    agent_name = "aro21"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.12"

[[inputs.http_response]]
  # ZCAM aro22 - RTMP Status
  urls = ["http://192.168.88.34/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro22"
    agent_name = "aro22"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.34"

[[inputs.http_response]]
  # ZCAM aro22 - Battery Status
  urls = ["http://192.168.88.34/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro22"
    agent_name = "aro22"
    endpoint_type = "battery"
    device_ip = "192.168.88.34"

[[inputs.http_response]]
  # ZCAM aro22 - Camera Mode
  urls = ["http://192.168.88.34/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro22"
    agent_name = "aro22"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.34"

[[inputs.http_response]]
  # ZCAM asb11 - RTMP Status
  urls = ["http://192.168.88.14/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-asb11"
    agent_name = "asb11"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.14"

[[inputs.http_response]]
  # ZCAM asb11 - Battery Status
  urls = ["http://192.168.88.14/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-asb11"
    agent_name = "asb11"
    endpoint_type = "battery"
    device_ip = "192.168.88.14"

[[inputs.http_response]]
  # ZCAM asb11 - Camera Mode
  urls = ["http://192.168.88.14/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-asb11"
    agent_name = "asb11"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.14"

# Temperature monitoring for all ZCAM devices
[[inputs.http_response]]
  # ZCAM aro11 - Temperature
  urls = ["http://192.168.88.10/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro11"
    agent_name = "aro11"
    endpoint_type = "temperature"
    device_ip = "192.168.88.10"

[[inputs.http_response]]
  # ZCAM aro12 - Temperature
  urls = ["http://192.168.88.186/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro12"
    agent_name = "aro12"
    endpoint_type = "temperature"
    device_ip = "192.168.88.186"

[[inputs.http_response]]
  # ZCAM aro21 - Temperature
  urls = ["http://192.168.88.12/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro21"
    agent_name = "aro21"
    endpoint_type = "temperature"
    device_ip = "192.168.88.12"

[[inputs.http_response]]
  # ZCAM aro22 - Temperature
  urls = ["http://192.168.88.34/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro22"
    agent_name = "aro22"
    endpoint_type = "temperature"
    device_ip = "192.168.88.34"

[[inputs.http_response]]
  # ZCAM asb11 - Temperature
  urls = ["http://192.168.88.14/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-asb11"
    agent_name = "asb11"
    endpoint_type = "temperature"
    device_ip = "192.168.88.14"

# TPE ZCAM Monitoring - New TPE Server Device
[[inputs.http_response]]
  # ZCAM TPE-001-1 - RTMP Status
  urls = ["http://192.168.20.8/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-tpe"
    agent_name = "tpe-001-1"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.20.8"

[[inputs.http_response]]
  # ZCAM TPE-001-1 - Battery Status
  urls = ["http://192.168.20.8/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-tpe"
    agent_name = "tpe-001-1"
    endpoint_type = "battery"
    device_ip = "192.168.20.8"

[[inputs.http_response]]
  # ZCAM TPE-001-1 - Camera Mode
  urls = ["http://192.168.20.8/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-tpe"
    agent_name = "tpe-001-1"
    endpoint_type = "camera_mode"
    device_ip = "192.168.20.8"

[[inputs.http_response]]
  # ZCAM TPE-001-1 - Temperature
  urls = ["http://192.168.20.8/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-tpe"
    agent_name = "tpe-001-1"
    endpoint_type = "temperature"
    device_ip = "192.168.20.8"
