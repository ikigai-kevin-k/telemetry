# Telegraf Configuration for ZCAM API Monitoring
# This configuration monitors ZCAM devices using HTTP response plugin

[global_tags]
  # Global tags for all metrics
  environment = "production"
  service = "zcam-monitoring"

[agent]
  # Agent configuration
  interval = "30s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = ""
  omit_hostname = false

# Output plugin - send metrics to Prometheus
[[outputs.prometheus_client]]
  # Expose metrics on port 9273 for Prometheus to scrape
  listen = ":9273"
  metric_version = 2

# HTTP Response monitoring for ZCAM devices
[[inputs.http_response]]
  # ZCAM ARO-001-1 - RTMP Status
  urls = ["http://192.168.88.184/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-001-1"
    agent_name = "aro-001-1"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.184"

[[inputs.http_response]]
  # ZCAM ARO-001-1 - Battery Status
  urls = ["http://192.168.88.184/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-001-1"
    agent_name = "aro-001-1"
    endpoint_type = "battery"
    device_ip = "192.168.88.184"

[[inputs.http_response]]
  # ZCAM ARO-001-1 - Camera Mode
  urls = ["http://192.168.88.184/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-001-1"
    agent_name = "aro-001-1"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.184"

[[inputs.http_response]]
  # ZCAM ARO-001-2 - RTMP Status
  urls = ["http://192.168.88.186/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-001-2"
    agent_name = "aro-001-2"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.186"

[[inputs.http_response]]
  # ZCAM ARO-001-2 - Battery Status
  urls = ["http://192.168.88.186/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-001-2"
    agent_name = "aro-001-2"
    endpoint_type = "battery"
    device_ip = "192.168.88.186"

[[inputs.http_response]]
  # ZCAM ARO-001-2 - Camera Mode
  urls = ["http://192.168.88.186/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-001-2"
    agent_name = "aro-001-2"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.186"

[[inputs.http_response]]
  # ZCAM ARO-002-1 - RTMP Status
  urls = ["http://192.168.88.183/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-002-1"
    agent_name = "aro-002-1"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.183"

[[inputs.http_response]]
  # ZCAM ARO-002-1 - Battery Status
  urls = ["http://192.168.88.183/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-002-1"
    agent_name = "aro-002-1"
    endpoint_type = "battery"
    device_ip = "192.168.88.183"

[[inputs.http_response]]
  # ZCAM ARO-002-1 - Camera Mode
  urls = ["http://192.168.88.183/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-002-1"
    agent_name = "aro-002-1"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.183"

[[inputs.http_response]]
  # ZCAM ARO-002-2 - RTMP Status
  urls = ["http://192.168.88.34/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-002-2"
    agent_name = "aro-002-2"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.34"

[[inputs.http_response]]
  # ZCAM ARO-002-2 - Battery Status
  urls = ["http://192.168.88.34/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-002-2"
    agent_name = "aro-002-2"
    endpoint_type = "battery"
    device_ip = "192.168.88.34"

[[inputs.http_response]]
  # ZCAM ARO-002-2 - Camera Mode
  urls = ["http://192.168.88.34/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-002-2"
    agent_name = "aro-002-2"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.34"

[[inputs.http_response]]
  # ZCAM ASB-001-1 - RTMP Status
  urls = ["http://192.168.88.212/ctrl/rtmp?action=query&index=0"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-asb-001-1"
    agent_name = "asb-001-1"
    endpoint_type = "rtmp_status"
    device_ip = "192.168.88.212"

[[inputs.http_response]]
  # ZCAM ASB-001-1 - Battery Status
  urls = ["http://192.168.88.212/ctrl/get?k=battery"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-asb-001-1"
    agent_name = "asb-001-1"
    endpoint_type = "battery"
    device_ip = "192.168.88.212"

[[inputs.http_response]]
  # ZCAM ASB-001-1 - Camera Mode
  urls = ["http://192.168.88.212/ctrl/mode"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-asb-001-1"
    agent_name = "asb-001-1"
    endpoint_type = "camera_mode"
    device_ip = "192.168.88.212"

# Temperature monitoring for all ZCAM devices
[[inputs.http_response]]
  # ZCAM ARO-001-1 - Temperature
  urls = ["http://192.168.88.184/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-001-1"
    agent_name = "aro-001-1"
    endpoint_type = "temperature"
    device_ip = "192.168.88.184"

[[inputs.http_response]]
  # ZCAM ARO-001-2 - Temperature
  urls = ["http://192.168.88.186/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-001-2"
    agent_name = "aro-001-2"
    endpoint_type = "temperature"
    device_ip = "192.168.88.186"

[[inputs.http_response]]
  # ZCAM ARO-002-1 - Temperature
  urls = ["http://192.168.88.183/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-002-1"
    agent_name = "aro-002-1"
    endpoint_type = "temperature"
    device_ip = "192.168.88.183"

[[inputs.http_response]]
  # ZCAM ARO-002-2 - Temperature
  urls = ["http://192.168.88.34/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-aro-002-2"
    agent_name = "aro-002-2"
    endpoint_type = "temperature"
    device_ip = "192.168.88.34"

[[inputs.http_response]]
  # ZCAM ASB-001-1 - Temperature
  urls = ["http://192.168.88.212/ctrl/temperature"]
  response_timeout = "5s"
  method = "GET"
  follow_redirects = false
  [inputs.http_response.tags]
    device_name = "zcam-asb-001-1"
    agent_name = "asb-001-1"
    endpoint_type = "temperature"
    device_ip = "192.168.88.212"
