# Zabbix Agent2 Configuration File
# This file is used to configure the Zabbix Agent2

# Basic agent settings
Server=100.64.0.113
ServerActive=100.64.0.113
Hostname=GC-ARO-001-2-agent

# Enable persistent buffer
EnablePersistentBuffer=1
PersistentBufferFile=/var/lib/zabbix/agent2_persistent_buffer.db

# Log settings
LogType=console

# Custom script directory
UserParameter=zcam.status,/var/lib/zabbix/scripts/check_zcam_status.sh

# System monitoring parameters
UserParameter=system.cpu.usage,/var/lib/zabbix/scripts/system_monitor.sh cpu_usage
UserParameter=system.memory.usage,/var/lib/zabbix/scripts/system_monitor.sh memory_usage
UserParameter=system.disk.usage,/var/lib/zabbix/scripts/system_monitor.sh disk_usage
UserParameter=system.disk.usage.mount[*],/var/lib/zabbix/scripts/system_monitor.sh disk_usage_mount $1
UserParameter=system.load.average,/var/lib/zabbix/scripts/system_monitor.sh load_average
# UserParameter=system.uptime,/var/lib/zabbix/scripts/system_monitor.sh uptime  # Commented out - conflicts with built-in key
UserParameter=system.temperature,/var/lib/zabbix/scripts/system_monitor.sh temperature
UserParameter=system.network.status[*],/var/lib/zabbix/scripts/system_monitor.sh network_status $1
UserParameter=system.health.score,/var/lib/zabbix/scripts/system_monitor.sh system_health

# System warning parameters
UserParameter=system.cpu.warning,/var/lib/zabbix/scripts/system_monitor.sh cpu_warning
UserParameter=system.memory.warning,/var/lib/zabbix/scripts/system_monitor.sh memory_warning
UserParameter=system.disk.warning,/var/lib/zabbix/scripts/system_monitor.sh disk_warning
UserParameter=system.temperature.warning,/var/lib/zabbix/scripts/system_monitor.sh temperature_warning
UserParameter=system.high.load,/var/lib/zabbix/scripts/system_monitor.sh high_load

# Power monitoring parameters
UserParameter=power.battery.status,/var/lib/zabbix/scripts/power_monitor.sh battery_power
UserParameter=power.battery.charge,/var/lib/zabbix/scripts/power_monitor.sh battery_charge
UserParameter=power.ups.runtime,/var/lib/zabbix/scripts/power_monitor.sh ups_runtime
UserParameter=power.supply.status,/var/lib/zabbix/scripts/power_monitor.sh power_supply_status
UserParameter=power.consumption,/var/lib/zabbix/scripts/power_monitor.sh power_consumption
UserParameter=power.events,/var/lib/zabbix/scripts/power_monitor.sh power_events
UserParameter=power.battery.health,/var/lib/zabbix/scripts/power_monitor.sh battery_health
UserParameter=power.warning,/var/lib/zabbix/scripts/power_monitor.sh power_warning
UserParameter=power.ups.status,/var/lib/zabbix/scripts/power_monitor.sh ups_status
UserParameter=power.summary,/var/lib/zabbix/scripts/power_monitor.sh power_summary

# Health check parameters
UserParameter=health.critical.services,/var/lib/zabbix/scripts/health_check.sh critical_services
UserParameter=health.disk.space,/var/lib/zabbix/scripts/health_check.sh disk_space
UserParameter=health.memory,/var/lib/zabbix/scripts/health_check.sh memory
UserParameter=health.cpu.load,/var/lib/zabbix/scripts/health_check.sh cpu_load
UserParameter=health.network,/var/lib/zabbix/scripts/health_check.sh network
UserParameter=health.temperature,/var/lib/zabbix/scripts/health_check.sh temperature
UserParameter=health.logs,/var/lib/zabbix/scripts/health_check.sh logs
UserParameter=health.filesystem,/var/lib/zabbix/scripts/health_check.sh filesystem
UserParameter=health.swap,/var/lib/zabbix/scripts/health_check.sh swap
UserParameter=health.uptime,/var/lib/zabbix/scripts/health_check.sh uptime
UserParameter=health.comprehensive,/var/lib/zabbix/scripts/health_check.sh comprehensive
UserParameter=health.summary,/var/lib/zabbix/scripts/health_check.sh summary

# Allow custom keys
AllowKey=system.run[*]
AllowKey=system.run[curl*]

# Timeout settings
Timeout=30

# Enable remote commands (optional, for advanced monitoring)
# Note: These parameters may not be supported in Zabbix 6.0

# Network settings
ListenPort=10050
ListenIP=0.0.0.0
